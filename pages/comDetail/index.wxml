<wxs module="filter" src="../../utils/numFr.wxs"></wxs>
<view class="container">
  <view class="swiper-wrap">
    <swiper class="img-wrap" autoplay="true" interval="3000">
      <block wx:for="{{showPics}}" wx:key="{{index}}">
        <swiper-item>
          <image src="{{item}}" class="slide-image" />
        </swiper-item>
      </block>
    </swiper>

    <view class="typePop" wx:if="{{productInfo.type=='POINT'}}">桔子换礼</view>
  </view>

  <view class="businessInfo-wrap">
    <view class="businessInfo">
      <view style="display:flex;justify-content: space-between;align-items: flex-start;">
        <view class="title">
          {{productInfo.productName}}
        </view>

        <view style="display:flex;align-items: center;font-size: 24rpx;color: #666;margin-top:4rpx;" bindtap="toGetPoint">
          做任务赚桔子
          <image src="../../images/arrow-right.png" style="width:14rpx;height:26rpx;margin-left:20rpx;"></image>
        </view>
      </view>
      <view class="row jc-sb" style="margin-top:10rpx;">
        <view class="row">
          <view class="row" wx:if="{{productInfo.type=='POINT'}}">
            <view style="font-size:34rpx;color: #E83221;">{{productInfo.point}}</view>
            <view style="font-size:28rpx;color: #E83221;">桔子</view>
          </view>
          <view class="row" wx:else>
            <view style="font-size:34rpx;color: #E83221;" wx:if="{{productInfo.point!=0}}">{{productInfo.point}}</view>
            <view style="font-size:28rpx;color: #E83221;" wx:if="{{productInfo.point!=0}}">桔子</view>
            <view style="font-size:34rpx;color: #E83221;" wx:if="{{productInfo.point!=0}}">+</view>
            <view style="font-size:34rpx;color: #E83221;">{{filter.toFix(productInfo.price)}}</view>
            <view style="font-size:28rpx;color: #E83221;">元</view>
          </view>
          <view style="font-size: 24rpx;color: #999999;text-decoration:line-through;margin-left:25rpx;">{{filter.toFix(productInfo.originalPrice)}} 元</view>
        </view>

        <view style="font-size: 24rpx;color: #999999;">已售{{productInfo.soldNum}}件</view>
      </view>

    </view>
  </view>
  <view class="yongkaxuzhi-wrap" style="margin-top:20rpx;">
    <view class="yongkaxuzhi">
      <view style="font-size: 30rpx;color: #333333;font-weight: bolder;">购买须知</view>
      <view style="background: #FBFBFB;border-radius: 10px;padding:30rpx 30rpx 10rpx 30rpx;margin-top:30rpx;">
        <view style="margin-bottom: 20rpx;" wx:for="{{note}}" wx:key="{{index}}">
          <view style="display:flex;align-items:center;">
            <view style="width:10rpx;height:10rpx;border-radius:50%;background: #FCBF0A;margin-right:20rpx;"></view>
            <view style="font-size: 28rpx;color: #666666;">{{item.title}}</view>
          </view>
          <view wx:for="{{item.content}}"  wx:key="{{index}}" style="display:flex;align-items:flex-start;margin-top:10rpx;">
            <view style="width:10rpx;height:10rpx;border-radius:50%;background: #999999;margin-right:20rpx;margin-top:12rpx;"></view>
            <view style="font-size: 24rpx;color: #999999;">{{item}}</view>
          </view>
        </view>
      </view>

    </view>
  </view>
  <view class="yongkaxuzhi-wrap" style="margin-top:20rpx;">
    <view class="yongkaxuzhi">
      <view style="font-size: 30rpx;color: #333333;font-weight: bolder;">门店信息</view>
      <view class="row jc-sb" style="margin-top:30rpx;">
        <view style="font-size: 28rpx;color:#333333;">{{store.name}}</view>
        <view class="row" bindtap="toMerchantsList">
          <view style="font-size: 24rpx;color: #999999;">适用1家门店</view>
          <image style="width:14rpx;height:26rpx;margin-left:20rpx;" src="../../images/arrow-right.png"></image>
        </view>
      </view>
      <view class="line" style="margin-top:30rpx;"></view>
      <view class="row jc-sb" style="margin-top:26rpx;">
        <view class="row">
          <image style="width:20rpx;height:23rpx;margin-right:10rpx;" src="../../images/position.png"></image>
          <view style="font-size: 24rpx;color: #666666;">{{store.address}}</view>
        </view>
        <image bindtap="call" style="width:30rpx;height:30rpx;" src="../../images/call.png"></image>
      </view>
    </view>
  </view>

  <view class="yongkaxuzhi-wrap" style="margin-top:20rpx;">
    <view class="yongkaxuzhi row jc-sb" bindtap="toCommentList">
      <view style="font-size: 30rpx;color: #333333;font-weight: bolder;">走心评价({{commentCount}})</view>
      <view class="row" bindtap="toCommentList" wx:if="{{commentCount>2}}">
        <view style="font-size:24rpx;color:#999999;">查看全部</view>
        <image style="margin-left:20rpx;width:14rpx;height:26rpx;" src="../../images/arrow-right.png"></image>
      </view>
    </view>

    <view class="item" wx:for="{{shortCommentList}}" wx:key="{{index}}" data-comid="{{item.id}}" bindtap="toCommentDetail">
      <view class="nickMsg ub ub-ac">
        <image class="userImg" src="../../images/headimg.png"></image>
        <view class="nickname">{{item.nickName}}</view>
        <view class="ub ub-f1 ub-ac ml10">
          <image class="icon_ping" src="../../images/icon_ping.png" wx:for="{{item.score}}" wx:key="{{index}}"></image>
        </view>
        <view class="times" hidden="{{true}}">2018-01-01 01:00:00</view>
      </view>
      <view class="content">{{item.content}}</view>
      <view class="imglist" hidden="{{true}}">
        <image src="../../images/mendianimg.png"></image>
      </view>
    </view>
  </view>

  <view class="yongkaxuzhi-wrap" style="margin-top:20rpx;" wx:if="{{false}}">
    <view class="yongkaxuzhi">
      <view style="font-size: 30rpx;color: #333333;font-weight: bolder;">详细信息</view>
      <image style="height:420rpx;"></image>
      <view style="font-size: 24rpx;color: #666666;margin-top:30rpx;">兰溪小馆位置位于北京市香山是由浙江人开的一家浙江菜馆，菜品丰富，整个店铺的装修风格是文艺淡雅的，环境优雅适合谈工作和朋友聚会</view>
    </view>
  </view>

  <view class="yongkaxuzhi-wrap" style="margin-top:20rpx;" wx:if="{{recommendCount>0}}">
    <view class="yongkaxuzhi">
      <view style="font-size: 30rpx;color: #333333;font-weight: bolder;">同店推荐</view>
      <view class="tuiList">
        <view class="tuiItem row jc-sb {{index==0?'':'b-b-1px'}}" wx:for="{{recommendList}}" wx:key="{{index}}">
          <view class="tuiRow">
            <view class="ub jc-sb" style="align-items:flex-start;">
              <view class="tuiName">{{item.productName}}</view>
              <view class="tuiExe" wx:if="{{item.type=='POINT'}}">{{item.point}}桔子</view>
              <view class="tuiExe" wx:else>{{item.point}}桔子+{{item.price}}元</view>
            </view>
            <view class="row jc-sb mt10">
              <view class="tuiPrice">已售{{item.soldNum}}件</view>
              <view class="tuiCount">{{filter.toFix(item.originalPrice)}} 元</view>
            </view>
          </view>
          <view class="huanliBtn" wx:if="{{item.type=='POINT'}}" data-id="{{item.productId}}" data-storeid="{{item.nearStore.id}}" bindtap="toComDetail">桔子换礼</view>
          <view class="huanliBtn" wx:else data-id="{{item.productId}}" data-storeid="{{item.nearStore.id}}" bindtap="toComDetail">去购买</view>
        </view>

      </view>
    </view>
  </view>

  <view class="footer">
    <view class="homeWrap" bindtap="gohomepage">
      <image src="../../images/shouye.png" style="width:40rpx;height:40rpx;"></image>
      <view class="home">首页</view>
    </view>
    <button class="homeWrap toBg" open-type="share">
      <image src="../../images/fenxiang.png" style="width:40rpx;height:40rpx;" open-type="share"></image>
      <view class="home">分享</view>
    </button>

    <!-- 判断用户橘子足不足  和是否只能原价购买 -->

    <!-- 如果是桔子和人民币组合购买 -->
    <view class="footerBtnWrap" wx:if="{{productInfo.type=='PRODUCT'&&productInfo.point>0&&productInfo.price>0}}">
      <view class="gokaBtn" bindtap="toCreateOrderByRmb">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;">{{filter.toFix(productInfo.originalPrice)}} 元</view>
          <view style="font-size: 18rpx;line-height:22rpx;">原价购买</view>
        </view>
      </view>
      <!-- 如果需要人民币 并且 桔子充足 -->
      <view class="xiadan" bindtap="toCreateOrder" wx:if="{{productInfo.price>0&&pointBalance>0}}">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;width:180rpx;">{{productInfo.point}}桔子+{{filter.toFix(productInfo.price)}}元</view>
          <view style="font-size: 18rpx;line-height:22rpx;text-align:center;">立即兑换</view>
        </view>
      </view>
      <!-- 如果不需要人民币 并且 桔子充足 -->
      <view class="xiadan" bindtap="toCreateOrderByPoint" wx:if="{{productInfo.price==0&&pointBalance>0}}">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;">{{productInfo.point}}桔子</view>
          <view style="font-size: 18rpx;line-height:22rpx;text-align:center;">立即兑换</view>
        </view>
      </view>
      <!-- 如果桔子不足 跳转到任务 -->
      <view class="xiadan" bindtap="toGetPoint" wx:if="{{pointBalance==0||!pointBalance}}">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;">桔子不足</view>
          <view style="font-size: 18rpx;line-height:22rpx;text-align:center;">赚桔子</view>
        </view>
      </view>
    </view>

    <!-- 如果是只能原价购买的商品 -->
    <view class="footerBtnWrap" wx:if="{{productInfo.type=='PRODUCT'&&productInfo.point==0&&productInfo.price>0}}">
      <view class="yuanjia-xiadan" bindtap="toCreateOrderByRmb">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;font-weight:bolder;">{{filter.toFix(productInfo.price)}}元</view>
          <view style="font-size: 18rpx;line-height:22rpx;text-align:center;">立即购买</view>
        </view>
      </view>
    </view>

    <!-- 如果是桔子换礼商品 -->
    <view class="footerBtnWrap" wx:if="{{productInfo.type=='POINT'}}">
      <!-- 如果桔子充足 -->
      <view class="yuanjia-xiadan" bindtap="toCreateOrderByPoint" wx:if="{{pointBalance>0}}">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;font-weight:bolder;">{{productInfo.point}} 桔子</view>
          <view style="font-size: 18rpx;line-height:22rpx;text-align:center;">立即兑换</view>
        </view>
      </view>
      <!-- 如果桔子不足 跳转到任务 -->
      <view class="yuanjia-xiadan" bindtap="toGetPoint" wx:if="{{pointBalance==0||!pointBalance}}">
        <view>
          <view style="font-size: 24rpx;font-weight:bold;line-height:34rpx;font-weight:bolder;">桔子不足</view>
          <view style="font-size: 18rpx;line-height:22rpx;">赚桔子</view>
        </view>
      </view>
    </view>

  </view>

  <!-- <BuyCardRadioGroup cardsDataList="{{huiyuancards}}" merchantId="{{merchantId}}" isShowHycardModal="{{isShowHycardModal}}" bind:closeEvent="_closeEvent" bind:showPreBuyCardEvent="showPreBuyCardModal"></BuyCardRadioGroup> -->

  <!-- <view class="modal" hidden="{{isShowFocusModal}}">
    <view class="gxbox">
      <view class="title">
        <view class="closeModal" bindtap="closeFocusModal">×</view>
      </view>
      <view class="focusSuccess ub ub-pc" wx:if="{{focusBoxMaker}}">关注成功</view>
      <view class="focusSuccess ub ub-pc" wx:else>已取消关注</view>
      <view class="gxdetail ub ub-pc" wx:if="{{focusBoxMaker}}">已共享TA的会员卡</view>
      <view class="gxboxBtnWrap">
        <view class="gxboxBtn" bindtap="closeFocusModal">确定</view>
      </view>
    </view>
  </view> -->

  <!-- <confirmBox isShowConfirmModal="{{isShowConfirmModal}}" confirmBoxTitle="{{confirmTitle}}" confirmBoxContent="{{confirmContent}}"></confirmBox> -->

</view>